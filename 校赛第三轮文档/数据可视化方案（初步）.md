# 林火蔓延模型数据可视化方案

### 一、 可视化核心目标

数据可视化在本方案中服务于三大核心目标：

1. **探索与理解 (Exploration & Understanding)**：在建模初期，直观地理解地形地貌等静态数据的分布特征。
2. **调试与验证 (Debugging & Validation)**：在建模过程中，通过可视化手段监控模型行为，验证物理过程的合理性，快速定位问题。
3. **呈现与沟通 (Presentation & Communication)**：在最终报告中，以最直观、最震撼的方式展示模型的核心结果，清晰地传达我们的建模思路与优势。

### 二、 可视化实施阶段与方案

我们将可视化方案分解为四个阶段，每个阶段都有明确的目标和技术选型。

#### **阶段一：静态环境数据可视化 (问题三基础)**

在处理真实地形数据时，首先需要对地理环境有宏观的认识。

- **目标**：展示真实山地的三维地貌和关键地形因子。
- **可视化内容**：
  1. **数字高程模型(DEM)图**：
     - **2D热力图**：用颜色深浅表示海拔高低，快速识别山脉和河谷。
     - **3D地形渲染图**：生成一个可交互的三维模型，展示山体的真实起伏。这是最终报告的“吸睛”利器。
  2. **坡度图 (Slope Map)**：将DEM数据计算出的坡度值进行可视化，用颜色区分平缓区域与陡峭山坡。
  3. **坡向图 (Aspect Map)**：将坡向（东南西北）用不同颜色表示，直观展示山体的阴坡与阳坡。
- **技术选型**：
  - **Python**:
    - `Matplotlib` & `Seaborn`: 用于绘制2D热力图。
    - `Rasterio` & `Geopandas`: 用于读取和处理`.tif`等地理栅格数据。
    - `Matplotlib`的`mplot3d`或`Mayavi`: 用于创建3D地形表面图。
  - **R语言**:
    - `ggplot2` (`geom_raster`): 用于绘制高质量的2D热力图。
    - **`rayshader` (强烈推荐)**: 这是制作惊艳3D地形图和渲染图的“神器”。它可以轻松地将DEM数据转换为带有光照和阴影的逼真3D模型，并可以叠加其他图层。

#### **阶段二：模型参数敏感性分析**

在模型构建完成后，需要分析关键参数对结果的影响，以证明我们参数设置的合理性。

- **目标**：展示蔓延速度R如何随关键物理参数（如坡度$\phi$、风速Vw等）变化。
- **可视化内容**：
  1. **单参数敏感性曲线**：固定其他参数，绘制蔓延速度R随单个参数（如坡度$\phi$从0°到60°）变化的二维曲线图。
  2. **双参数敏感性等高线图/热力图**：展示蔓延速度R在两个参数（如坡度$\phi和风速V_w$）共同作用下的变化情况。
- **技术选型**：
  - **Python**: `Matplotlib` / `Seaborn` 的 `lineplot` 和 `heatmap` 功能。
  - **R语言**: `ggplot2` 的 `geom_line` 和 `geom_tile`。

#### **阶段三：核心模拟结果可视化**

这是整个可视化方案的重中之重，直接回答竞赛题目提出的问题。

- **目标**：清晰、动态地展示火场在24、48、72小时内的蔓延范围和过程。
- **可视化内容**：
  1. **火场蔓延边界图 (静态)**：
     - 在2D地形图或卫星图上，用不同颜色的**等高线**分别标出24h、48h、72h的火场边界。这是论文报告中必须有的核心成果图。
  2. **火场蔓延过程动画 (动态)**：
     - 将元胞自动机在每个时间步 `Δt` 的状态输出为一帧图像，最终合成为一个GIF或MP4动画。动画中，元胞的颜色可以代表其状态（未燃烧-绿色，地表火-橙色，树冠火-红色，已烧毁-黑色）。
  3. **三维火场蔓延动画 (高级)**：
     - 将上述的动态火场状态，叠加到阶段一制作的**3D地形模型**上。这将提供一个极具冲击力和说服力的“上帝视角”，观察火势如何在山谷中穿行，如何翻越山脊。
- **技术选型**：
  - **Python**:
    - `Matplotlib`的`contour`函数绘制边界图。
    - `Matplotlib.animation.FuncAnimation`是制作2D动画的标准库。
  - **R语言**:
    - `ggplot2`的`geom_contour`绘制边界图。
    - **`gganimate` (强烈推荐)**: 与`ggplot2`无缝集成，可以非常方便地将一系列静态图转化为平滑的动画。
    - **`rayshader` (再次强烈推荐)**: 它不仅能做静态3D地形，还能在3D模型上渲染动态数据，是制作高级三维蔓延动画的不二之选。

#### **阶段四：高级模型特征可视化**

如果采用了“多层CA模型”，需要专门的可视化来展示其独特性。

- **目标**：展示地表火与树冠火的联动关系。
- **可视化内容**：
  1. **分层对比视图**：并排或上下排列地表层和树冠层的2D蔓延动画，可以清晰地看到地表火如何引发树冠火，以及树冠火如何产生“飞火”反过来影响地表。
  2. **动态统计图**：用堆叠面积图展示在模拟过程中，四种状态（未燃烧、地表火、树冠火、已烧毁）的元胞数量各自的消长变化。
- **技术选型**：与阶段三类似，重点在于数据的分层处理和图表的并列布局。`Matplotlib`的子图(`subplots`)功能或`R`的`patchwork`包可以轻松实现。

### 三、 工具总结

| **可视化任务**        | **Python推荐包**        | **R语言推荐包**               | **备注**                        |
| --------------------- | ----------------------- | ----------------------------- | ------------------------------- |
| **2D静态地图/热力图** | `Matplotlib`, `Seaborn` | `ggplot2`                     | 两者均可，`ggplot2`语法更优雅   |
| **处理地理数据**      | `Rasterio`, `Geopandas` | `raster`, `sf`                | Python生态更完善                |
| **3D静态地形**        | `Matplotlib (mplot3d)`  | **`rayshader`**               | **`rayshader`效果碾压**         |
| **2D/3D动态模拟**     | `Matplotlib.animation`  | **`gganimate` + `rayshader`** | **R组合拳效果更佳，制作更便捷** |
| **图表组合**          | `Matplotlib (subplots)` | `patchwork`                   | 两者均可，`patchwork`更简单     |

**结论**：可视化不仅是展示成果的工具，更是贯穿研究全程的分析利器。建议在每一步计算后都进行可视化检查，这能帮助我们更早地发现模型中的问题，并激发新的思考。